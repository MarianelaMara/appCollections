<p style="color: green"><%= notice %></p>

<h1 class="display-4 text-center text-gray-800"> <%= t('.collection') %></h1>

<div id="collections" class="container mt-4">
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th><%= t('.name') %></th>
        <th><%= t('.actions') %></th>
        <th><%= t('Estado') %></th>
      </tr>
    </thead>
    <tbody>
      <% @collections.each do |collection| %>
        <tr>
          <td><%= collection.name %></td>
          <td>
          <% if Current.user.designer? %>
            <%= link_to t('.delete'), collection, method: :delete, data: { confirm: "¿Estás seguro?" }, class: "btn btn-danger" %>
            <%= link_to t('.editar'), edit_collection_path(collection), class: "btn btn-secondary" %>       
          <% end %>
          <% if current_user.engineer? && collection.aasm_state == 'waiting_to_materials' %>
            <%= link_to 'Ver proveedores', providers_path(collection_id: collection) , class: "btn btn-success" %>
            #borrarlos despues para cuando la coleccion espera
            <%= link_to t('.view'), collection, class: "btn btn-primary" %>  
          <% elsif current_user.engineer? && collection.aasm_state == 'waiting_to_makers'  %>
          <%= link_to 'Ver lugares', makers_path(collection_id: collection), class: "btn btn-success" %>      
          <% else %>
            <%= link_to t('.view'), collection, class: "btn btn-primary" %>  
          <% end %>
          </td>
          <td><%= collection.aasm_state %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <% if Current.user.designer? %>
    <%= link_to t('.new'), new_collection_path, class: "btn btn-success" %>
  <% end %>
</div>