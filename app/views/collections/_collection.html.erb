<div class="card">
  <div class="card-body">
    <h5 class="card-title"><%= @collection.name %></h5>
    <div class=" justify-content-md-start">
    <p class="card-text">
      <strong><%= t('.owner') %></strong>
      <%= @collection.owner %>
    </p>
    <p class="card-text">
      <strong><%= t('.manufacturing_lead_time') %></strong>
      <%= @collection.manufacturing_lead_time %>
    </p>
    <p class="card-text">
      <strong><%= t('.estimated_release_date') %></strong>
      <%= @collection.estimated_release_date %>
    </p>
    <% if current_user.engineer? %>
      <%= form_with(model: @collection, local: true) do |f| %>
        <div class="field">
          <strong><%= f.label "Presupuesto de fabricacion:" %></strong>
          <%= f.number_field :budget %>
        </div>
        <div class="actions">
          <%= f.submit "Guardar" %>
        </div>
      <% end %>
    <% end %>

    </div>
    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
      <% if Current.user.designer? %>
        <%= link_to t('.edit'), edit_collection_path(@collection), class: "btn btn-warning me-md-2" %> 
        <%= button_to t('.delete'), @collection, method: :delete, class: "btn btn-danger me-md-2" %>
        <%= link_to  t('.add'), new_collection_article_path(@collection), method: :post, class: "btn btn-success me-md-2" %>
        <%= button_to 'Enviar a revision', collection_end_collection_path(@collection), method: :get %>
      <% elsif current_user.engineer? %>
      #este delete sacarlo solo lo puse para poder borrar colecciones desde el dise√±ador
       <%= button_to t('.delete'), @collection, method: :delete, class: "btn btn-danger me-md-2" %>
        <%= link_to  'No viable', collection_noviable_collection_path(@collection), method: :get, class: "btn btn-danger me-md-2" %> 
        <%= link_to  'Redefinir', collection_redefinir_collection_path(@collection), method: :get, class: "btn btn-warning me-md-2" %> 
        <%= link_to  'Aceptar y completar', collection_end_revision_path(@collection), method: :get, class: "btn btn-success me-md-2" %> 
      <% end %>
    </div>
      <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th><%= t('.articles') %></th>
        <th><%= t('.actions') %></th>
      </tr>
    </thead>
    <tbody>
      <% @collection.articles.each do |article| %>
        <tr>
          <td><%= article.model %></td>
          <td>
           <li class="list-group-item"> <%= link_to t('.view') , collection_article_path(@collection, article), class: "btn btn-primary" %></li>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <% if current_user.engineer? %>
  <%= content_tag :table, class: "table table-striped table-hover" do %> 
    <%= content_tag :thead do %> 
      <%= content_tag :tr do %> 
        <%= content_tag :th, "Nombre del material" %> 
        <%= content_tag :th, "Cantidad de unidades" %> 
        <%= content_tag :th, "Maximo presupuesto por unidad" %> 
      <% end %> 
    <% end %> 
    <%= content_tag :tbody do %> 
      <% @materials.each do |material| %> 
        <%= content_tag :tr do %> 
          <%= content_tag :td, material.name %> 
          <%= content_tag :td, material.total_quantity %> 
          <%= content_tag :td, material.max_presupuesto %>
        <% end %> 
      <% end %> 
    <% end %> 
  <% end %>
  <% end %>
  </div>
</div>